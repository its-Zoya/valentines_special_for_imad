<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>#LOVE BOOK</title>
</head>
<body>
<div class="reader-container">
  <div class="controls">
    <div class="control-group">
      <label for="brightness">Brightness</label>
      <input type="range" id="brightness" class="slider" min="0.4" max="1" step="0.1" value="1">
    </div>
    <div class="control-group">
      <label for="font-size">Font Size</label>
      <input type="range" id="font-size" class="slider" min="14" max="22" step="1" value="16">
    </div>
  </div>

  <div class="book-container" id="bookContainer">
    <div class="page-indicator" id="pageIndicator">Page 1-2</div>
    <div class="binding-gutter"></div>

    <div class="book" id="book">
      <div class="book-spread" id="currentSpread">
        <div class="page-left">
          <div class="page-content" id="leftPageContent"></div>
          <div class="page-number" id="leftPageNumber">1</div>
        </div>
        <div class="page-right">
          <div class="page-content" id="rightPageContent"></div>
          <div class="page-number" id="rightPageNumber">2</div>
        </div>
      </div>
    </div>

    <div class="click-areas">
      <div class="click-area" id="prevArea"></div>
      <div class="click-area" id="nextArea"></div>
    </div>
  </div>

  <div class="measurement-container" id="measurementContainer"></div>
</div>
<style type="text/css">* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Georgia", serif;
  background: linear-gradient(135deg, #8b4513, #a0522d);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.reader-container {
  background: transparent;
  max-width: 1200px;
  width: 100%;
  position: relative;
}

.controls {
  background: rgba(139, 69, 19, 0.9);
  backdrop-filter: blur(10px);
  padding: 15px 20px;
  border-radius: 15px 15px 0 0;
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-bottom: 10px;
}

.control-group {
  display: flex;
  align-items: center;
  gap: 12px;
}

.control-group label {
  font-size: 14px;
  font-weight: 500;
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.slider {
  width: 120px;
  height: 6px;
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.3);
  outline: none;
  -webkit-appearance: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #fff;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #fff;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.book-container {
  height: 700px;
  position: relative;
  perspective: 2000px;
  background: var(--bg-color, #faf7f0);
  border-radius: 0 0 15px 15px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  overflow: hidden;
}

.book {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  display: flex;
}

.book-spread {
  width: 100%;
  height: 100%;
  display: flex;
  position: absolute;
  top: 0;
  left: 0;
}

.page-left,
.page-right {
  width: calc(50% - 20px);
  height: 100%;
  background: var(--bg-color, #faf7f0);
  padding: 50px 40px 80px 40px;
  position: relative;
}

.page-left {
  margin-right: 10px;
  border-radius: 0 8px 8px 0;
  background: radial-gradient(
      ellipse 100px 300px at 100% 50%,
      rgba(139, 69, 19, 0.03) 0%,
      transparent 50%
    ),
    linear-gradient(
      to right,
      var(--bg-color, #faf7f0) 0%,
      rgba(139, 69, 19, 0.01) 95%,
      rgba(139, 69, 19, 0.05) 100%
    ),
    var(--bg-color, #faf7f0);
  box-shadow: inset -8px 0 20px -10px rgba(139, 69, 19, 0.1),
    inset -2px 0 5px -2px rgba(139, 69, 19, 0.05);
  transform-origin: right center;
  transform: perspective(1000px) rotateY(-1deg);
}

.page-right {
  margin-left: 10px;
  border-radius: 8px 0 0 8px;
  background: radial-gradient(
      ellipse 100px 300px at 0% 50%,
      rgba(139, 69, 19, 0.03) 0%,
      transparent 50%
    ),
    linear-gradient(
      to left,
      var(--bg-color, #faf7f0) 0%,
      rgba(139, 69, 19, 0.01) 95%,
      rgba(139, 69, 19, 0.05) 100%
    ),
    var(--bg-color, #faf7f0);
  box-shadow: inset 8px 0 20px -10px rgba(139, 69, 19, 0.1),
    inset 2px 0 5px -2px rgba(139, 69, 19, 0.05);
  transform-origin: left center;
  transform: perspective(1000px) rotateY(1deg);
}

.page-content {
  width: 100%;
  height: 100%;
  line-height: 1.7;
  color: var(--text-color, #2c2c2c);
  font-size: var(--font-size, 16px);
  text-align: justify;
  text-justify: inter-word;
  word-wrap: break-word;
}

.page-content h1 {
  font-size: calc(var(--font-size, 16px) * 2);
  margin-bottom: 30px;
  text-align: center;
  color: var(--text-color, #8b4513);
  font-weight: normal;
}

.page-content h2 {
  font-size: calc(var(--font-size, 16px) * 1.5);
  margin: 30px 0 20px 0;
  color: var(--text-color, #8b4513);
  font-weight: normal;
}

.page-content p {
  margin-bottom: 18px;
  text-indent: 25px;
}

.page-number {
  position: absolute;
  bottom: 30px;
  font-size: calc(var(--font-size, 16px) * 0.8);
  color: var(--text-color, #666);
}

.page-left .page-number {
  left: 40px;
}

.page-right .page-number {
  right: 40px;
}

.binding-gutter {
  position: absolute;
  left: 50%;
  top: 0;
  width: 40px;
  height: 100%;
  transform: translateX(-50%);
  z-index: 20;
  background: linear-gradient(
    to right,
    transparent 0%,
    rgba(139, 69, 19, 0.05) 20%,
    rgba(139, 69, 19, 0.1) 40%,
    rgba(139, 69, 19, 0.15) 50%,
    rgba(139, 69, 19, 0.1) 60%,
    rgba(139, 69, 19, 0.05) 80%,
    transparent 100%
  );
  box-shadow: inset 0 0 30px -5px rgba(139, 69, 19, 0.2),
    0 0 20px -5px rgba(139, 69, 19, 0.1);
}

.binding-gutter::before {
  content: "";
  position: absolute;
  top: 0;
  left: 50%;
  width: 2px;
  height: 100%;
  background: linear-gradient(
    to bottom,
    rgba(139, 69, 19, 0.2) 0%,
    rgba(139, 69, 19, 0.4) 20%,
    rgba(139, 69, 19, 0.6) 50%,
    rgba(139, 69, 19, 0.4) 80%,
    rgba(139, 69, 19, 0.2) 100%
  );
  transform: translateX(-50%);
}

.flipping-page {
  position: absolute;
  top: 0;
  width: calc(50% - 10px);
  height: 100%;
  background: var(--bg-color, #faf7f0);
  transform-style: preserve-3d;
  transition: transform 0.8s ease-out;
  z-index: 10;
  border-radius: 8px;
}

.flipping-page.next-flip {
  right: 0;
  transform-origin: left center;
  border-radius: 8px 0 0 8px;
}

.flipping-page.prev-flip {
  left: 10px;
  transform-origin: right center;
  border-radius: 0 8px 8px 0;
}

.flipping-page .page-front,
.flipping-page .page-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  padding: 50px 40px 80px 40px;
}

.flipping-page .page-front {
  background: radial-gradient(
      ellipse 100px 300px at 0% 50%,
      rgba(139, 69, 19, 0.03) 0%,
      transparent 50%
    ),
    linear-gradient(
      to left,
      var(--bg-color, #faf7f0) 0%,
      rgba(139, 69, 19, 0.01) 95%,
      rgba(139, 69, 19, 0.05) 100%
    ),
    var(--bg-color, #faf7f0);
}

.flipping-page .page-back {
  background: radial-gradient(
      ellipse 100px 300px at 100% 50%,
      rgba(139, 69, 19, 0.03) 0%,
      transparent 50%
    ),
    linear-gradient(
      to right,
      var(--bg-color, #faf7f0) 0%,
      rgba(139, 69, 19, 0.01) 95%,
      rgba(139, 69, 19, 0.05) 100%
    ),
    var(--bg-color, #faf7f0);
  transform: rotateY(180deg);
}

.flipping-page.flipping.next-flip {
  transform: rotateY(-180deg);
}

.flipping-page.flipping.prev-flip {
  transform: rotateY(180deg);
}

.click-areas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 5;
  display: flex;
}

.click-area {
  height: 100%;
  width: 50%;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.click-area:hover {
  background-color: rgba(139, 69, 19, 0.03);
}

.page-indicator {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(139, 69, 19, 0.8);
  color: #fff;
  padding: 8px 20px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  z-index: 25;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.measurement-container {
  position: absolute;
  top: -9999px;
  left: -9999px;
  width: calc(50% - 20px);
  padding: 50px 40px 80px 40px;
  line-height: 1.7;
  text-align: justify;
  text-justify: inter-word;
  word-wrap: break-word;
  font-family: "Georgia", serif;
  visibility: hidden;
}

@media (max-width: 768px) {
  .controls {
    flex-direction: column;
    gap: 20px;
  }

  .book-container {
    height: 600px;
  }

  .page-left,
  .page-right {
    padding: 30px 25px 60px 25px;
    width: calc(50% - 15px);
  }

  .page-left {
    margin-right: 7px;
  }

  .page-right {
    margin-left: 8px;
  }

  .binding-gutter {
    width: 30px;
  }

  .flipping-page {
    width: calc(50% - 8px);
  }

  .flipping-page .page-front,
  .flipping-page .page-back {
    padding: 30px 25px 60px 25px;
  }

  .measurement-container {
    width: calc(50% - 15px);
    padding: 30px 25px 60px 25px;
  }
}
</style>
<script type="text/javascript">class DigitalBookReader {
  constructor() {
    this.currentSpread = 0;
    this.totalPages = 0;
    this.pages = [];
    this.isAnimating = false;

    this.book = document.getElementById("book");
    this.currentSpreadEl = document.getElementById("currentSpread");
    this.leftPageContent = document.getElementById("leftPageContent");
    this.rightPageContent = document.getElementById("rightPageContent");
    this.leftPageNumber = document.getElementById("leftPageNumber");
    this.rightPageNumber = document.getElementById("rightPageNumber");
    this.pageIndicator = document.getElementById("pageIndicator");
    this.brightnessSlider = document.getElementById("brightness");
    this.fontSizeSlider = document.getElementById("font-size");
    this.bookContainer = document.getElementById("bookContainer");
    this.prevArea = document.getElementById("prevArea");
    this.nextArea = document.getElementById("nextArea");
    this.measurementContainer = document.getElementById("measurementContainer");

    this.bookElements = this.parseBookContent();
    this.initializeEventListeners();

    setTimeout(() => {
      this.repaginateContent();
    }, 100);
  }

  parseBookContent() {
    const content = [
  { "type": "h1", "content": "Always on My Mind" },
  {
    "type": "p",
    "content": "Iâ€™ve been thinking about you nonstop lately, and itâ€™s wild how you sneak into every corner of my brain. Walking to class, scrolling my phone, even staring at the ceiling at night, there you are. Itâ€™s not just that I like youâ€”itâ€™s how you make even the small, ordinary moments feel cinematic and alive. Your laugh, the way you tilt your head when confused, the little quirks that are justâ€¦ you, somehow make everything brighter."
  },
  { "type": "h2", "content": "Magnetic Chaos" },
  {
    "type": "p",
    "content": "Thereâ€™s this energy you carry thatâ€™s impossible to ignore. Itâ€™s chaotic, electric, and comforting all at once. You pull me in without even trying, making me want to notice the little things, the moments most people overlook. Being around you feels like floatingâ€”like Iâ€™m weightless but grounded at the same time, and I donâ€™t ever want to leave that space."
  },
  { "type": "h2", "content": "Little Moments, Big Impact" },
  {
    "type": "p",
    "content": "I catch myself replaying our moments in my head, like highlight reels I canâ€™t stop watching. The way your eyes light up when youâ€™re excited, the sound of your laugh, the way you make ordinary things feel extraordinaryâ€”itâ€™s all addictive. Even the tiniest interactions stay with me, lingering long after they happen, and somehow making life feel richer, fuller, and more vibrant."
  },
  { "type": "h2", "content": "Safe in Your Orbit" },
  {
    "type": "p",
    "content": "You make me feel safe just by being around. Not in a boring 'everythingâ€™s fine' way, but in a 'I can be myself and itâ€™s enough' way. Even when life feels messy, thinking of you makes it easier to breathe. Youâ€™re grounding and electric all at once, and itâ€™s terrifyingly beautiful. I love that you can pull me into your world without asking for anything in return."
  },
  { "type": "h2", "content": "Imagining Us" },
  {
    "type": "p",
    "content": "I canâ€™t stop imagining the little adventures we could have together. Late-night talks, inside jokes only weâ€™d understand, laughing at nonsense until our stomachs hurt. Just existing in a space thatâ€™s entirely ours feels like a dream I never want to end. Even daydreaming about you makes my chest feel full, like carrying fireworks that are all for you."
  },
  { "type": "h2", "content": "Confession" },
  {
    "type": "p",
    "content": "Hereâ€™s the truth: I really like you. I like you in a way that makes me hope you notice, makes me want to be better, and makes me want to share everything with youâ€”silly, messy, perfect, chaotic, and all of it. Youâ€™re my favorite plot twist, my best thought of the day, my constant distraction, and honestly, I wouldnâ€™t trade it for anything in the world."
  },
  { "type": "h2", "content": "Forever Valentine" },
  {
    "type": "p",
    "content": "So this Valentineâ€™s, I want you to know my heart has your name written in invisible ink, and itâ€™s staying there. You make life brighter, every moment better, and every day worth it. Loving you might be unpredictable, messy, and wild, but itâ€™s my favorite adventure, and I donâ€™t ever want it to stop. ðŸ’Œ"
  }
]
    return content;
  }

  initializeEventListeners() {
    this.prevArea.addEventListener("click", () => this.prevSpread());
    this.nextArea.addEventListener("click", () => this.nextSpread());

    this.brightnessSlider.addEventListener("input", (e) =>
      this.adjustBrightness(e.target.value)
    );
    this.fontSizeSlider.addEventListener("input", (e) => {
      this.adjustFontSize(e.target.value);
      setTimeout(() => this.repaginateContent(), 50);
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") this.prevSpread();
      if (e.key === "ArrowRight") this.nextSpread();
    });
  }

  repaginateContent() {
    this.pages = [];
    const maxHeight = this.getMaxPageHeight() - 100;

    this.measurementContainer.style.fontSize =
      getComputedStyle(this.bookContainer).getPropertyValue("--font-size") ||
      "16px";
    this.measurementContainer.style.color =
      getComputedStyle(this.bookContainer).getPropertyValue("--text-color") ||
      "#2c2c2c";

    let currentPageElements = [];
    let currentPageHeight = 0;

    for (const element of this.bookElements) {
      const elementHeight = this.measureElementHeight(element);

      if (elementHeight > maxHeight) {
        if (currentPageElements.length > 0) {
          this.pages.push([...currentPageElements]);
          currentPageElements = [];
          currentPageHeight = 0;
        }

        if (element.type === "p") {
          const splitParagraphs = this.splitParagraph(element, maxHeight);
          for (const splitPart of splitParagraphs) {
            this.pages.push([splitPart]);
          }
        } else {
          this.pages.push([element]);
        }
      } else if (
        currentPageHeight + elementHeight > maxHeight &&
        currentPageElements.length > 0
      ) {
        this.pages.push([...currentPageElements]);
        currentPageElements = [element];
        currentPageHeight = elementHeight;
      } else {
        currentPageElements.push(element);
        currentPageHeight += elementHeight;
      }
    }

    if (currentPageElements.length > 0) {
      this.pages.push(currentPageElements);
    }

    this.totalPages = this.pages.length;

    if (this.currentSpread * 2 >= this.totalPages) {
      this.currentSpread = Math.max(0, Math.floor((this.totalPages - 1) / 2));
    }

    this.updateCurrentSpread();
    this.updateUI();
  }

  measureElementHeight(element) {
    const style = element.style ? ` style="${element.style}"` : "";
    this.measurementContainer.innerHTML = `<${element.type}${style}>${element.content}</${element.type}>`;

    const tempDiv = this.measurementContainer.firstElementChild;
    return tempDiv.offsetHeight;
  }

  splitParagraph(paragraph, maxHeight) {
    const words = paragraph.content.split(" ");
    const parts = [];
    let currentWords = [];

    for (const word of words) {
      const testWords = [...currentWords, word];
      const testElement = { ...paragraph, content: testWords.join(" ") };
      const testHeight = this.measureElementHeight(testElement);

      if (testHeight > maxHeight && currentWords.length > 0) {
        parts.push({ ...paragraph, content: currentWords.join(" ") });
        currentWords = [word];
      } else {
        currentWords.push(word);
      }
    }

    if (currentWords.length > 0) {
      parts.push({ ...paragraph, content: currentWords.join(" ") });
    }

    return parts;
  }

  getMaxPageHeight() {
    const containerHeight = this.bookContainer.offsetHeight;
    const padding = window.innerWidth <= 768 ? 90 : 130;
    return containerHeight - padding;
  }

  renderPageContent(pageIndex) {
    if (pageIndex >= this.pages.length) return "";

    return this.pages[pageIndex]
      .map((element) => {
        const style = element.style ? ` style="${element.style}"` : "";
        return `<${element.type}${style}>${element.content}</${element.type}>`;
      })
      .join("");
  }

  updateCurrentSpread() {
    const leftPageIndex = this.currentSpread * 2;
    const rightPageIndex = leftPageIndex + 1;

    this.leftPageContent.innerHTML = this.renderPageContent(leftPageIndex);
    this.rightPageContent.innerHTML = this.renderPageContent(rightPageIndex);

    this.leftPageNumber.textContent = leftPageIndex + 1;
    this.rightPageNumber.textContent =
      rightPageIndex < this.totalPages ? rightPageIndex + 1 : "";
  }

  nextSpread() {
    if (this.isAnimating || this.currentSpread * 2 + 1 >= this.totalPages)
      return;

    this.isAnimating = true;
    this.createFlippingPage("next");
  }

  prevSpread() {
    if (this.isAnimating || this.currentSpread <= 0) return;

    this.isAnimating = true;
    this.createFlippingPage("prev");
  }

  createFlippingPage(direction) {
    const flippingPage = document.createElement("div");
    flippingPage.className = `flipping-page ${direction}-flip`;

    const pageFront = document.createElement("div");
    pageFront.className = "page-front";

    const pageBack = document.createElement("div");
    pageBack.className = "page-back";

    if (direction === "next") {
      const currentRightIndex = this.currentSpread * 2 + 1;
      const nextLeftIndex = (this.currentSpread + 1) * 2;

      pageFront.innerHTML = `
                        <div class="page-content">${this.renderPageContent(
                          currentRightIndex
                        )}</div>
                        <div class="page-number">${
                          currentRightIndex < this.totalPages
                            ? currentRightIndex + 1
                            : ""
                        }</div>
                    `;

      pageBack.innerHTML = `
                        <div class="page-content">${this.renderPageContent(
                          nextLeftIndex
                        )}</div>
                        <div class="page-number">${
                          nextLeftIndex < this.totalPages
                            ? nextLeftIndex + 1
                            : ""
                        }</div>
                    `;
    } else {
      const currentLeftIndex = this.currentSpread * 2;
      const prevRightIndex = (this.currentSpread - 1) * 2 + 1;

      pageFront.innerHTML = `
                        <div class="page-content">${this.renderPageContent(
                          prevRightIndex
                        )}</div>
                        <div class="page-number">${
                          prevRightIndex < this.totalPages
                            ? prevRightIndex + 1
                            : ""
                        }</div>
                    `;

      pageBack.innerHTML = `
                        <div class="page-content">${this.renderPageContent(
                          currentLeftIndex
                        )}</div>
                        <div class="page-number">${currentLeftIndex + 1}</div>
                    `;
    }

    flippingPage.appendChild(pageFront);
    flippingPage.appendChild(pageBack);
    this.book.appendChild(flippingPage);

    setTimeout(() => {
      flippingPage.classList.add("flipping");
    }, 50);

    setTimeout(() => {
      if (direction === "next") {
        this.currentSpread++;
      } else {
        this.currentSpread--;
      }
      this.updateCurrentSpread();
      this.updateUI();
    }, 300);

    setTimeout(() => {
      this.book.removeChild(flippingPage);
      this.isAnimating = false;
    }, 850);
  }

  updateUI() {
    const leftPage = this.currentSpread * 2 + 1;
    const rightPage = this.currentSpread * 2 + 2;
    const displayRight = rightPage <= this.totalPages ? `-${rightPage}` : "";
    this.pageIndicator.textContent = `Page ${leftPage}${displayRight} of ${this.totalPages}`;
  }

  adjustBrightness(value) {
    const brightness = parseFloat(value);
    const r = Math.floor(250 * brightness);
    const g = Math.floor(247 * brightness);
    const b = Math.floor(240 * brightness);
    const bgColor = `rgb(${r}, ${g}, ${b})`;
    const textColor = brightness > 0.7 ? "#2c2c2c" : "#555";

    this.bookContainer.style.setProperty("--bg-color", bgColor);
    this.bookContainer.style.setProperty("--text-color", textColor);
  }

  adjustFontSize(value) {
    this.bookContainer.style.setProperty("--font-size", `${value}px`);
  }
}

document.addEventListener("DOMContentLoaded", () => {
  new DigitalBookReader();
});
</script>
</body>
</html>